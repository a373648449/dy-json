<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Model List</title>
    <style>
      .search-box {
        margin-bottom: 20px;
      }
      .model-list {
        display: flex;
        flex-wrap: wrap;
      }
      .model-item {
        width: 300px;
        margin-right: 20px;
        margin-bottom: 20px;
        padding: 10px;
        border: 1px solid #ccc;
        box-sizing: border-box;
      }
      .model-item img {
        max-width: 100%;
        height: auto;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div class="search-box">
      <label for="search-id">Search by ID:</label>
      <input type="text" id="search-id" name="search-id">
      <button id="search-button">Search</button>
    </div>
    <div class="model-list"></div>
    <script>
      const apiURL = "https://civitai.com/api/v1/models?page=1&limit=100";
      const modelList = document.querySelector(".model-list");
      const searchButton = document.querySelector("#search-button");
      const searchInput = document.querySelector("#search-id");

      // Function to fetch data from API and display the results
      function displayModels() {
        fetch(apiURL)
          .then((response) => response.json())
          .then((data) => {
            modelList.innerHTML = "";
            data.items.forEach((item) => {
              if (!item.nsfw) {
                const modelItem = document.createElement("div");
                modelItem.classList.add("model-item");

                const modelImage = document.createElement("img");
                 modelImage.src = item.modelVersions[0].images[0].url;
                modelItem.appendChild(modelImage);

                const modelName = document.createElement("h2");
                modelName.innerText = item.name;
                modelItem.appendChild(modelName);

                const modelID = document.createElement("p");
                modelID.innerText = "ID: " + item.id;
                modelItem.appendChild(modelID);

				const downloadLink = document.createElement("a");
                downloadLink.classList.add("download-button");
                downloadLink.setAttribute("href", item.modelVersions[0].downloadUrl);
                downloadLink.setAttribute("download", item.modelVersions[0].filename);
                downloadLink.innerText = "Download";
                modelItem.appendChild(downloadLink);

                modelList.appendChild(modelItem);
              }
            });
          });
      }

      // Function to filter models by ID
      function searchModels() {
        const searchID = searchInput.value;
        fetch(apiURL)
          .then((response) => response.json())
          .then((data) => {
            modelList.innerHTML = "";
            data.items.forEach((item) => {
              if (item.id == searchID && !item.nsfw) {
                const modelItem = document.createElement("div");
                modelItem.classList.add("model-item");

                const modelImage = document.createElement("img");
                 modelImage.src = item.modelVersions[0].images[0].url;
                modelItem.appendChild(modelImage);

                const modelName = document.createElement("h2");
                modelName.innerText = item.name;
                modelItem.appendChild(modelName);

                const modelID = document.createElement("p");
                modelID.innerText = "ID: " + item.id;
                modelItem.appendChild(modelID);

			    const downloadLink = document.createElement("a");
                downloadLink.classList.add("download-button");
                downloadLink.setAttribute("href", item.modelVersions[0].downloadUrl);
                downloadLink.setAttribute("download", item.modelVersions[0].filename);
                downloadLink.innerText = "Download";
                modelItem.appendChild(downloadLink);

                modelList.appendChild(modelItem);
              }
            });
          });
      }

      displayModels();

      searchButton.addEventListener("click", searchModels);
      searchInput.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          searchModels();
        }
      });
    </script>
  </body>
